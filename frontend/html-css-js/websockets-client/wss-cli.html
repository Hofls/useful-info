<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Client</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; }
        .sidebar { width: 250px; height: 100vh; overflow-y: auto; border-right: 1px solid #ccc; padding: 10px; }
        .main { flex-grow: 1; padding: 20px; display: flex; flex-direction: column; height: 100vh; }
        .controls { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        select, button { flex: 1; padding: 8px; }
        textarea { width: 100%; height: 20%; margin-bottom: 10px; flex-grow: 1; }
        .response { border: 1px solid #ccc; padding: 10px; flex-grow: 1; overflow-y: auto; white-space: pre-wrap; }
    </style>
</head>
<body>
<div class="sidebar" id="requestList"></div>
<div class="main">
    <div class="controls">
        <button onclick="sendRequest()">Send to</button>
        <select id="wsEndpoint">
            <option value="wss://echo.websocket.org">wss://echo.websocket.org</option>
        </select>

    </div>
    <textarea id="requestArea" placeholder="Enter your request JSON..."></textarea>
    <h3>Response:</h3>
    <div class="response" id="responseArea"></div>
</div>

<script>
    let sockets = {};
    const endpoint = "wss://echo.websocket.org";
    const tokens = [
        "cZN5hna5ln4RYrAUv1lCNV9423Wlcv9ukyd4LO9L15T2xvA0AMMw",
        "dK92ahXb5YpC7JQTm2DFoN873KZmruYwsVgx1PL8F0NBvaL6EGoM"
    ];
    tokens.forEach(token => {
        const socket = new WebSocket(endpoint);
        sockets[token] = socket;
        socket.addEventListener('open', () => {
            console.log(`WebSocket connection opened with token: ${token}`);
            socket.send(JSON.stringify({ token }));
        });
        socket.addEventListener('message', (event) => {
            document.getElementById('responseArea').innerText = JSON.stringify(JSON.parse(event.data), null, 4);
        });
    });

    function sendRequest() {
        document.getElementById('responseArea').innerText = "";
        const requestText = document.getElementById('requestArea').value;
        try {
            const requestJson = JSON.parse(requestText);
            Object.values(sockets).forEach(socket => socket.send(JSON.stringify(requestJson)));
            console.log("Sent:", requestJson);
        } catch (error) {
            alert('Invalid JSON format');
        }
    }

    function fillRequest(request) {
        document.getElementById('requestArea').value = JSON.stringify(request, null, 4);
    }

    const requests = [
        { type: "ping" }, { type: "status" }, { type: "list" },
        { type: "get_user", id: 1 }, { type: "get_user", id: 2 },
        { type: "create_user", name: "Alice" }, { type: "create_user", name: "Bob" },
        { type: "update_user", id: 1, name: "Charlie" }, { type: "delete_user", id: 2 },
        { type: "get_task", id: 101 }, { type: "get_task", id: 102 },
        { type: "create_task", title: "Task A" }, { type: "create_task", title: "Task B" },
        { type: "update_task", id: 101, title: "Task A Updated" },
        { type: "delete_task", id: 102 }, { type: "fetch_logs" },
        { type: "get_settings" }, { type: "update_settings", theme: "dark" },
        { type: "restart_service" }
    ];

    const requestList = document.getElementById('requestList');
    requests.forEach(req => {
        const btn = document.createElement('button');
        btn.innerText = JSON.stringify(req);
        btn.style.display = "block";
        btn.style.marginBottom = "5px";
        btn.onclick = () => fillRequest(req);
        requestList.appendChild(btn);
    });
</script>
</body>
</html>
